import{b as i,j as e}from"./query-CLJXXnyt.js";import{q as d,A as c,n as u,B as x,t as p,E as h,F as f}from"./index-B7gfWGL-.js";import"./checkbox-BKeUI-d9.js";import"./sentry-BmFBC7An.js";import{t as n}from"./arabic-utils-DbmNOh8M.js";import"./firebase-app-B16QGRlq.js";import{M as j}from"./MosqueGrid-D-QyBb8k.js";import"./textarea-B5o91wq8.js";import{S as g}from"./share-2-C0CuHnV6.js";import{e as y,L as N}from"./router-Di6JPJcB.js";import"./ui-vendor-Dbbq2re4.js";import"./AudioButton-DIHVMNWz.js";import"./circle-alert-CdOOUx3X.js";import"./youtube-CY2NlXOD.js";import"./external-link-B3dLlnZJ.js";import"./skeleton-wH4GlXrJ.js";function K(){const{username:r}=y(),{data:s,isLoading:l,error:o}=i({queryKey:["profile",r],queryFn:()=>h(r),enabled:!!r}),{data:t}=i({queryKey:["publicTracker",r],queryFn:()=>f(r),enabled:!!r}),m=()=>{const a=`${window.location.origin}/u/${r}`;navigator.clipboard.writeText(a),p.success("تم نسخ رابط الملف الشخصي")};return l?e.jsx(d,{}):o||!s?e.jsxs("div",{className:"container py-12 text-center",children:[e.jsx("p",{className:"text-lg text-muted-foreground",children:"المستخدم غير موجود"}),e.jsxs(N,{to:"/",className:"mt-4 inline-flex items-center gap-1 text-primary hover:underline",children:[e.jsx(c,{className:"h-4 w-4"}),"العودة للرئيسية"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(u,{children:e.jsxs("title",{children:["مفضلات ",s.display_name||s.username," - أئمة التراويح"]})}),e.jsxs("div",{className:"container py-6",children:[e.jsxs("div",{className:"mb-6 flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[s.avatar_url?e.jsx("img",{src:s.avatar_url,alt:"",className:"h-12 w-12 rounded-full object-cover",referrerPolicy:"no-referrer"}):e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-primary/10 text-lg font-bold text-primary",children:(s.display_name||s.username)[0]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:s.display_name||s.username}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.mosques.length," مسجد في المفضلة"]})]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(x,{variant:"outline",size:"sm",onClick:m,className:"gap-1.5",children:[e.jsx(g,{className:"h-4 w-4"}),"مشاركة الملف"]})})]}),t&&t.stats.attended>0&&(()=>{const a=Math.round(t.stats.attended/30*100);return e.jsxs("div",{className:"mb-6 rounded-xl bg-white p-4 shadow-card",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between text-sm",children:[e.jsx("span",{className:"font-medium",children:"متابعة التراويح"}),e.jsxs("span",{className:"text-muted-foreground",children:[n(t.stats.attended)," من ٣٠ ليلة (",n(a),"٪)"]})]}),e.jsx("div",{className:"h-2.5 overflow-hidden rounded-full bg-muted",children:e.jsx("div",{className:"h-full rounded-full bg-primary transition-all duration-500",style:{width:`${a}%`}})})]})})(),s.mosques.length>0?e.jsx(j,{mosques:s.mosques}):e.jsx("p",{className:"py-12 text-center text-muted-foreground",children:"لا توجد مفضلات بعد"})]})]})}export{K as ProfilePage};
