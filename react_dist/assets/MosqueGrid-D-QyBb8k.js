import{j as e}from"./query-CLJXXnyt.js";import{a as $,b as S}from"./checkbox-BKeUI-d9.js";import{c as b,a as c,u as T,H as A,r as D,t as k,G as I,J as L,K as q,N as C,C as z,k as j,l as f,m as y,U as B,B as _,T as E}from"./index-B7gfWGL-.js";import{A as F}from"./AudioButton-DIHVMNWz.js";import{a as H,b as P}from"./arabic-utils-DbmNOh8M.js";import{a as N}from"./sentry-BmFBC7An.js";import"./firebase-app-B16QGRlq.js";import{S as U}from"./share-2-C0CuHnV6.js";import{Y as V,M as X}from"./youtube-CY2NlXOD.js";import{E as R}from"./external-link-B3dLlnZJ.js";import{L as G}from"./router-Di6JPJcB.js";import{S as m}from"./skeleton-wH4GlXrJ.js";const W=[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]],Y=b("bike",W);const Z=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],J=b("car",Z);const K=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],O=b("copy",K);const Q=[["path",{d:"M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z",key:"1dudjm"}],["path",{d:"M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z",key:"l2t8xc"}],["path",{d:"M16 17h4",key:"1dejxt"}],["path",{d:"M4 13h4",key:"1bwh8b"}]],ee=b("footprints",Q);const se=[["path",{d:"m13.5 8.5-5 5",key:"1cs55j"}],["path",{d:"m8.5 8.5 5 5",key:"a8mexj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],re=b("search-x",se),te={walking:{icon:ee,bgClass:"bg-gradient-to-br from-green-50 to-accent-light"},bicycle:{icon:Y,bgClass:"bg-gradient-to-br from-blue-50 to-accent-light"},car:{icon:J,bgClass:"bg-gradient-to-br from-amber-50 to-accent-light"}};function ae({distance:s,className:r}){const a=P(s),{icon:t,bgClass:n}=te[a],i=H(s);return e.jsxs("div",{className:c("flex items-center gap-2 rounded-full px-3 py-1.5 text-sm font-medium","border-e-[3px] border-accent text-primary-dark shadow-sm","transition-all duration-300 hover:-translate-y-0.5 hover:shadow-md",n,r),children:[e.jsx(t,{className:"h-4 w-4 text-primary"}),e.jsx("span",{children:i})]})}const ne={sm:"h-9 w-9",md:"h-11 w-11",lg:"h-12 w-12"},ie={sm:"h-3.5 w-3.5",md:"h-5 w-5",lg:"h-6 w-6"},oe={sm:"h-7 w-7",md:"h-9 w-9",lg:"h-10 w-10"};function ce({mosqueId:s,mosqueName:r,className:a,size:t="md"}){const{isFavorite:n,toggleFavorite:i,requiresAuth:l}=T(),[d,h]=N.useState(!1),[u,p]=N.useState(!1),g=N.useRef(void 0),x=n(s),w=o=>{if(o.preventDefault(),o.stopPropagation(),l){localStorage.setItem("pendingFavorite",String(s)),h(!0);return}const v=!x;g.current&&clearTimeout(g.current),p(!0),g.current=setTimeout(()=>p(!1),500),i(s),v?k.success(r?`تمت الإضافة للمفضلة: ${r}`:"تمت الإضافة للمفضلة",{duration:2e3}):k.success(r?`تمت الإزالة من المفضلة: ${r}`:"تمت الإزالة من المفضلة",{duration:2e3})};return e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:w,className:c("relative flex items-center justify-center rounded-full","transition-colors duration-200","hover:scale-110 active:scale-95",x?"bg-red-50 text-red-500 hover:bg-red-100":"bg-gray-50 text-gray-400 hover:bg-gray-100 hover:text-red-400",ne[t],a),"aria-label":x?"إزالة من المفضلة":"إضافة للمفضلة",title:x?"إزالة من المفضلة":"إضافة للمفضلة",children:[u&&e.jsx("span",{className:c("absolute rounded-full border-2 heart-ring",x?"border-red-400":"border-gray-300",oe[t])}),e.jsx(A,{className:c(ie[t],"transition-colors duration-200",u&&"heart-pop",x&&"fill-current")})]}),e.jsx(D,{open:d,onOpenChange:h})]})}const le={sm:"h-9 w-9",md:"h-11 w-11",lg:"h-12 w-12"},de={sm:"h-3.5 w-3.5",md:"h-5 w-5",lg:"h-6 w-6"};function me({className:s}){return e.jsx("svg",{className:s,viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})})}function he({className:s}){return e.jsx("svg",{className:s,viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})}async function xe(s){try{await navigator.clipboard.writeText(s)}catch{const r=document.createElement("textarea");r.value=s,r.style.position="fixed",r.style.opacity="0",document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r)}}function ue({mosqueId:s,mosqueName:r,imamName:a,className:t,size:n="md"}){const[i,l]=N.useState(!1),d=`${window.location.origin}/mosque/${s}`,h=`استمع لتلاوة ${a} في ${r}`,u=async o=>{if(o.preventDefault(),o.stopPropagation(),navigator.share)try{await navigator.share({title:r,text:h,url:d})}catch(v){if(v instanceof Error&&v.name==="AbortError")return}},p=o=>{o.stopPropagation(),window.open(`https://wa.me/?text=${encodeURIComponent(`${h}
${d}`)}`,"_blank")},g=o=>{o.stopPropagation(),window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(h)}&url=${encodeURIComponent(d)}`,"_blank")},x=async o=>{o.stopPropagation(),await xe(`${h} - ${d}`),l(!0),k.success("تم نسخ الرابط",{duration:2e3}),setTimeout(()=>l(!1),2e3)},w=e.jsx("button",{className:c("flex items-center justify-center rounded-full","transition-all duration-300","hover:scale-110 active:scale-95","bg-gray-50 text-gray-400 hover:bg-gray-100 hover:text-primary",le[n],t),"aria-label":"مشاركة",title:"مشاركة",children:e.jsx(U,{className:c(de[n],"transition-transform duration-300")})});return typeof navigator<"u"&&"share"in navigator?e.jsx("div",{onClick:u,children:w}):e.jsxs(I,{children:[e.jsx(L,{asChild:!0,onClick:o=>o.stopPropagation(),children:w}),e.jsxs(q,{align:"end",className:"min-w-[160px]",children:[e.jsxs(C,{onClick:p,className:"gap-2 cursor-pointer",children:[e.jsx(me,{className:"h-4 w-4 text-[#25D366]"}),e.jsx("span",{children:"واتساب"})]}),e.jsxs(C,{onClick:g,className:"gap-2 cursor-pointer",children:[e.jsx(he,{className:"h-4 w-4"}),e.jsx("span",{children:"X (تويتر)"})]}),e.jsxs(C,{onClick:x,className:"gap-2 cursor-pointer",children:[i?e.jsx(z,{className:"h-4 w-4 text-green-500"}):e.jsx(O,{className:"h-4 w-4"}),e.jsx("span",{children:"نسخ الرابط"})]})]})]})}function pe({mosque:s,className:r}){const{id:a,name:t,location:n,imam:i,audio_sample:l,youtube_link:d,map_link:h,distance:u}=s,p=typeof u=="number";return e.jsx($,{className:c("mosque-card group relative overflow-hidden border border-transparent shadow-card","transition-all duration-300","hover:-translate-y-0.5 hover:shadow-card-hover hover:border-accent/30","animate-fade-in-up",p&&"border-s-[3px] border-accent",r),children:e.jsxs(S,{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsxs(j,{children:[e.jsx(f,{asChild:!0,children:e.jsx("span",{children:e.jsx(ce,{mosqueId:a,mosqueName:t,size:"sm"})})}),e.jsx(y,{children:e.jsx("p",{children:"إضافة للمفضلة"})})]}),e.jsxs(j,{children:[e.jsx(f,{asChild:!0,children:e.jsx("span",{children:e.jsx(ue,{mosqueId:a,mosqueName:t,imamName:i??"غير محدد",size:"sm"})})}),e.jsx(y,{children:e.jsx("p",{children:"مشاركة"})})]})]}),e.jsxs("div",{className:"mb-3 md:mb-5 flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("h2",{className:"flex items-center gap-2 text-lg md:text-xl font-bold text-primary",children:[e.jsx("img",{src:"/static/images/mosque-icon.svg",alt:"",className:"h-6 w-6","aria-hidden":"true"}),e.jsx(G,{to:`/mosque/${a}`,className:"transition-colors hover:text-primary-dark",children:t})]}),p&&e.jsx(ae,{distance:u})]}),e.jsxs("div",{className:"mb-3 flex flex-wrap items-center justify-between gap-3 rounded-lg border border-primary/10 bg-primary-light/50 p-2.5 md:p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-foreground",children:[e.jsx(B,{className:"h-5 w-5 text-primary","aria-hidden":"true"}),e.jsx("p",{children:i??"غير محدد"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[l&&e.jsxs(j,{children:[e.jsx(f,{asChild:!0,children:e.jsx("span",{children:e.jsx(F,{mosqueId:a,mosqueName:t,imamName:i??"غير محدد",audioSrc:l})})}),e.jsx(y,{children:e.jsx("p",{children:"استمع للتلاوة"})})]}),d&&e.jsxs(j,{children:[e.jsx(f,{asChild:!0,children:e.jsx("a",{href:d,target:"_blank",rel:"noopener noreferrer",className:c("flex h-9 w-9 items-center justify-center rounded-full","bg-youtube text-white shadow-sm","transition-all duration-200","hover:-translate-y-0.5 hover:bg-youtube-dark"),"aria-label":"شاهد على يوتيوب",children:e.jsx(V,{className:"h-4 w-4"})})}),e.jsx(y,{children:e.jsx("p",{children:"شاهد على يوتيوب"})})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 rounded-lg border border-primary/10 bg-primary-light/50 p-2.5 md:p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-foreground",children:[e.jsx(X,{className:"h-5 w-5 text-primary","aria-hidden":"true"}),e.jsx("p",{className:"break-words",children:n})]}),h&&e.jsxs(j,{children:[e.jsx(f,{asChild:!0,children:e.jsx(_,{variant:"outline",size:"sm",asChild:!0,className:c("h-9 gap-1.5 rounded-full border-border bg-white px-3","text-primary-dark shadow-sm","transition-all duration-200","hover:-translate-y-0.5 hover:bg-primary hover:text-white hover:shadow-md"),children:e.jsxs("a",{href:h,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(R,{className:"h-4 w-4"}),e.jsx("span",{className:"button-text",children:"فتح في قوقل ماب"})]})})}),e.jsx(y,{children:e.jsx("p",{children:"فتح الموقع في خرائط قوقل"})})]})]})]})})}function ge(){return e.jsx($,{className:"overflow-hidden border-0 shadow-card",children:e.jsxs(S,{className:"p-6",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx(m,{className:"h-11 w-11 rounded-full"}),e.jsx(m,{className:"h-11 w-11 rounded-full"})]}),e.jsx("div",{className:"mb-5 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{className:"h-6 w-6 rounded"}),e.jsx(m,{className:"h-6 w-40"})]})}),e.jsxs("div",{className:"mb-3 flex items-center justify-between rounded-lg bg-primary-light/50 p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{className:"h-5 w-5 rounded-full"}),e.jsx(m,{className:"h-5 w-28"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{className:"h-9 w-20 rounded-full"}),e.jsx(m,{className:"h-9 w-9 rounded-full"})]})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-primary-light/50 p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{className:"h-5 w-5 rounded-full"}),e.jsx(m,{className:"h-5 w-36"})]}),e.jsx(m,{className:"h-9 w-32 rounded-full"})]})]})})}function _e({mosques:s,isLoading:r=!1,isError:a=!1,isEmpty:t=!1,onReset:n,isProximitySorted:i=!1}){return r?e.jsx("div",{className:"grid grid-cols-1 gap-5 md:grid-cols-2",children:Array.from({length:6}).map((l,d)=>e.jsx(ge,{},d))}):a?e.jsx(M,{type:"error",message:"حدث خطأ أثناء تحميل البيانات",subtitle:"الرجاء المحاولة لاحقاً",onReset:n}):t||s.length===0?e.jsx(M,{type:"empty",message:"لم يتم العثور على مساجد مطابقة للبحث",subtitle:"جرّب تعديل كلمات البحث أو تغيير المنطقة",onReset:n,buttonText:"إعادة ضبط البحث"}):e.jsx("div",{className:c("grid grid-cols-1 gap-5 md:grid-cols-2",i&&"proximity-sorted"),children:s.map(l=>e.jsx(pe,{mosque:l},l.id))})}function M({type:s,message:r,subtitle:a,onReset:t,buttonText:n="إعادة المحاولة"}){const i=s==="error"?E:re;return e.jsxs("div",{className:"rounded-xl bg-white p-16 text-center shadow-card",children:[e.jsx("div",{className:"mb-5 flex justify-center",children:e.jsx("div",{className:c("flex h-16 w-16 items-center justify-center rounded-full",s==="error"?"bg-destructive/10":"bg-primary-light"),children:e.jsx(i,{className:c("h-8 w-8",s==="error"?"text-destructive":"text-primary")})})}),e.jsx("p",{className:"mb-2 text-lg font-medium text-primary",children:r}),a&&e.jsx("p",{className:"mb-5 text-sm text-muted-foreground",children:a}),t&&e.jsx(_,{variant:"ghost",onClick:t,className:"text-primary hover:bg-primary-light",children:n})]})}export{_e as M};
